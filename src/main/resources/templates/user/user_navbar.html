<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/output.css}" />
</head>

<body id="content">

<!-- ================= USER NAVBAR ================= -->
<nav data-th-fragment="user-navbar"
     class="bg-white border-b border-gray-200 shadow-sm dark:bg-gray-900 sm:pl-64 fixed w-full top-0 left-0 right-0 z-50 transition-colors duration-300">

  <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto px-4 py-3">

    <!-- Sidebar Toggle (Mobile) -->
    <button data-drawer-target="logo-sidebar" data-drawer-toggle="logo-sidebar"
      aria-controls="logo-sidebar" type="button"
      class="inline-flex items-center p-2 text-sm text-gray-500 rounded-lg sm:hidden 
             hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 
             dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600">
      <span class="sr-only">Open sidebar</span>
      <svg class="w-6 h-6" aria-hidden="true" fill="currentColor"
           viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
        <path clip-rule="evenodd" fill-rule="evenodd"
              d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 
                 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 
                 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 
                 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 
                 0 010 1.5H2.75A.75.75 0 012 10z"></path>
      </svg>
    </button>

    <!-- Logo -->
    <a th:href="@{/user/dashboard}" class="flex items-center space-x-3">
      <img data-th-src="@{/images/telephone.png}" class="h-8 w-8 object-cover rounded-full shadow" alt="Logo" />
      <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">SN</span>
    </a>

    <!-- Right Buttons -->
    <div class="flex items-center gap-3 order-2">

      <!-- Theme Toggle -->
      <button onclick="changeTheme()" id="themeBtn"
        class="flex items-center gap-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white 
               px-3 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition">
        <i class="fa-solid fa-circle-half-stroke"></i>
        <span id="themeLabel">Light</span>
      </button>

      <!-- User Profile -->
      <a data-th-href="@{/user/profile}"
        class="text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 
               font-medium rounded-lg text-sm px-4 py-2 transition">
        <span th:text="${LoggedInUser.name}">User</span>
      </a>

      <!-- Logout -->
      <a data-th-href="@{/logout}"
        class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 
               font-medium rounded-lg text-sm px-4 py-2 transition">
        Logout
      </a>
    </div>

    <!-- Navigation Links -->
    <div class="items-center justify-between hidden sm:flex w-auto order-1" id="navbar-cta">
      <ul class="flex flex-row font-medium space-x-8 text-gray-900 dark:text-white">
        <li><a data-th-href="@{/home}" class="hover:text-blue-600 dark:hover:text-blue-400">Home</a></li>
        <li><a data-th-href="@{/about}" class="hover:text-blue-600 dark:hover:text-blue-400">About</a></li>
        <li><a data-th-href="@{/services}" class="hover:text-blue-600 dark:hover:text-blue-400">Services</a></li>
        <li><a data-th-href="@{/contact}" class="hover:text-blue-600 dark:hover:text-blue-400">Contact</a></li>
      </ul>
    </div>

  </div>
</nav>

<!-- Dark Mode Script -->
<script>
function changeTheme() {
  const html = document.documentElement;
  const themeBtn = document.getElementById("themeBtn");
  const themeLabel = document.getElementById("themeLabel");

  if (html.classList.contains("dark")) {
    html.classList.remove("dark");
    localStorage.setItem("theme", "light");
    themeLabel.textContent = "Light";
  } else {
    html.classList.add("dark");
    localStorage.setItem("theme", "dark");
    themeLabel.textContent = "Dark";
  }
}

// Apply saved theme on load
window.onload = () => {
  const theme = localStorage.getItem("theme");
  const html = document.documentElement;
  const themeLabel = document.getElementById("themeLabel");
  if (theme === "dark") {
    html.classList.add("dark");
    themeLabel.textContent = "Dark";
  } else {
    html.classList.remove("dark");
    themeLabel.textContent = "Light";
  }
};
</script>

</body>
</html>
